{% extends "core/base.html" %}
{% load static %}







{% block page-title %}
<h1 style="color:#120F75;">
    <i>
        <i class="bi bi-house" style="font-size: 80px; color: #FED402;"></i>
    </i>
    <strong>
        DASHBOARD
    </strong>
    
</h1>
{% endblock page-title %}


{% block buttons %}

{% endblock buttons %}






{% block content %}
{% comment %} <div class="container-fluid d-flex align-items-center justify-content-center">
    <img src="{% static 'images/man_at_work.png' %}" alt="working" />
</div>  {% endcomment %}


{% comment %} <div class="container m-2">
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">Babies Available</h5>
                    <p class="card-text"> <strong class="display-6" style="font-weight: 800;">
                        {{ no_of_babies }}
                    </strong></p>
                    <a href="{% url 'viewbaby' %}" class="card-link btn btn-primary" style="background-color: #120F75;font-size: 15px; ">View All Babies</a>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">Total Sitters</h5>
                    <p class="card-text">
                        <p class="card-text"> <strong class="display-6" style="font-weight: 800;">
                        </strong></p>
                        {{ no_of_sitters }}</p>
                    <a href="{% url 'viewsitter' %}" class="card-link btn btn-primary" style="background-color: #120F75;font-size: 15px; ">View All Sitters</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">Daily Fees</h5>
                    <p class="card-text">{{ total_payments_sum }}</p>
                    <a href="{% url 'viewsitter' %}" class="card-link btn btn-primary" style="background-color: #120F75;font-size: 15px; ">View All Payments</a>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">Dolls Sold</h5>
                    <p class="card-text">{{ dolls_sold }}</p>
                    <a href="{% url 'dollview' %}" class="card-link btn btn-primary" style="background-color: #120F75;font-size: 15px; ">View All Dolls</a>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="card mb-3">
                <center>
                    <div class="card-body">
                        <h5 class="card-title">Baby Registration Statistics</h5>
                        <canvas id="userChart" width="400" height="400"></canvas>
                    </div>
                </center>
                
            </div>
        </div>
    </div>
</div> {% endcomment %}

<div class="container mt-3 m-auto">
    <div class="row">
        <div class="col-md-6">

            <div class="card bg-light mb-3" style="border: 1px solid #FED402;">
                <div class="card-body d-flex justify-content-between">
                    <div class="">
                        <h5 class="card-title" ><strong>Registered Babies</strong> </h5>
                    
                        <p class="card-text">
                            <strong class="display-6" style="font-weight: 600;">
                                {{ no_of_babies }}
                            </strong>
                        </p>
                        <a href="{% url 'viewsitter' %}" style="background-color: #120F75;" class="btn btn-primary btn-block">View All Babies</a>
                    </div>

                    <div class="">
                        <i class="bi bi-tencent-qq" style="font-size: 50px; color: red;"></i>
                    </div>
                    
                </div>
            </div>


            
        </div>
        <div class="col-md-6">
        

                <div class="card bg-light mb-3" style="border: 1px solid #FED402;">
                    <div class="card-body d-flex justify-content-between">
                        <div class="">
                            <h5 class="card-title" ><strong>Total Sitters</strong> </h5>
                        
                            <p class="card-text">
                                <strong class="display-6" style="font-weight: 600;">
                                    {{ no_of_sitters }}
                                </strong>
                            </p>
                            <a href="{% url 'viewsitter' %}" style="background-color: #120F75;" class="btn btn-primary btn-block">View All Sitters</a>
                        </div>
    
                        <div class="">
                            <i class="bi bi-people" style="font-size: 50px; color: blue;"></i>
                        </div>
                        
                    </div>
                </div>


                
            </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="card bg-light mb-3" style="border: 1px solid #FED402;">
                <div class="card-body d-flex justify-content-between">
                    <div class="">
                        <h5 class="card-title" ><strong>Revenue</strong> </h5>
                    
                        <p class="card-text">
                            shs.
                            <strong class="display-6" style="font-weight: 600;">
                                {{ total_payments_sum }}
                            </strong>
                        </p>
                        <a href="{% url 'viewsitter' %}" style="background-color: #120F75;" class="btn btn-primary btn-block">View All Payments</a>
                    </div>

                    <div class="">
                        <i class="fa fa-money" style="font-size: 50px; color: green;"></i>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="col-md-6">

                <div class="card bg-light mb-3" style="border: 1px solid #FED402;">
                    <div class="card-body d-flex justify-content-between">
                        <div class="">
                            <h5 class="card-title" ><strong>Dolls sold</strong> </h5>
                        
                            <p class="card-text">
                                <strong class="display-6" style="font-weight: 600;">
                                    {{ dolls_sold }}
                                </strong>
                            </p>
                            <a href="{% url 'viewsitter' %}" style="background-color: #120F75;" class="btn btn-primary btn-block">View All Dolls</a>
                        </div>
    
                        <div class="">
                            <i class="fa fa-child-reaching" style="font-size: 50px; color: magenta;"></i>
                        </div>
                        
                    </div>
                </div>

            
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="card bg-light mb-3 " style="border: 1px solid #FED402;">
                <div class="card-body m-auto">
                    <div class="d-flex gap-2 align-items-center mb-4">
                        <i style="font-size: 35px;" class="bi bi-shop"></i>
                        <h5 style="font-size: 25px;" class="card-title"><strong>Inventory</strong> </h5>
                    </div>
                    
                    <div class="d-flex justify-content-between gap-1 flex-wrap justify-content-center" style="">
                        {% for item, remaining_quantity in remaining_inventory.items %}
                            <div class=" p-2" style="border: 1px solid #120F75; border-radius: 10px;">
                                <td>{{ item.name }}</td>:
                                <td>{{ remaining_quantity }}</td>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div> 
        <div class="col-md-12 ">
            <div class="card bg-light mb-3" style="border: 1px solid #FED402;">
                <div class="card-body m-auto">
                    <h5 class="card-title">Baby Registration Statistics</h5>
                    <canvas id="userChart" width="400" height="400"></canvas>
                </div>
            </div>
        </div>

        
    </div>
</div>







<script>
    document.addEventListener('DOMContentLoaded', function () {
        var ctx = document.getElementById('babyAttendanceChart').getContext('2d');
        var babyAttendanceChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: {{ dates|safe }},
                datasets: [{
                    label: 'Number of Check-Ins',
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1,
                    data: {{ checkin_counts|safe }},
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true,
                            stepSize: 1
                        }
                    }]
                }
            }
        });
    });
</script>

<script>
    // JavaScript code to render the pie chart
    var ctx = document.getElementById('userChart').getContext('2d');
    var userChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Babies registered for Monthly ', 'Babies registered for Daily'],
            datasets: [{
                label: 'User Distribution',
                data: [{{ monthly_babies }}, {{ daily_babies }}],
                backgroundColor: [
                    '#9B1C31',  // Red color for Monthly Users
                    'rgba(54, 162, 235, 0.5)'   // Blue color for Daily Users
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: false,
            maintainAspectRatio: false,
            // Add any other options as needed
        }
    });
</script>
{% endblock content %}

