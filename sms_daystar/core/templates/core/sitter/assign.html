{% extends "core/base.html" %}

{% block page-title %}
    <div class=" d-flex align-items-center">
        <i class="bi bi-people text-primary" style="font-size: 80px;"></i>
        <h1>   
            ASSIGN SITTER
        </h1>
    </div>
    

{% endblock page-title %}



{% block addlink %} {% url 'addsitter' %} {% endblock addlink %}



{% block title %}
    DayStar | AssignSitterPage
{% endblock title %}

{% block content %}

    <div class="container w-100">
        <h1>Assigning Babies to {{sitters.s_name}}</h1>

        {% if error_message %}
            <p>{{ error_message }}</p>
        {% endif %}
    
        <form method="post">
            {% csrf_token %}
            
            <!-- Select sitter -->
            {{ form }}
            {% comment %} <input type="hidden" name="sitter" value="{{ sitters.id }}"> {% endcomment %}
            <br>
        
            <!-- Submit button -->
            <button type="submit">Assign Babies</button>
        </form>

        
    </div>

    <script>
        // Function to handle checkbox change event
        function handleCheckboxChange(checkbox) {
            if (checkbox.checked) {
                // If checkbox is checked, remove the corresponding baby from the list
                var babyId = checkbox.value;
                var babyLabel = document.querySelector('label[for="id_babies_' + babyId + '"]').textContent;
                var select = document.getElementById('id_babies');
                for (var i = 0; i < select.options.length; i++) {
                    if (select.options[i].text === babyLabel) {
                        select.remove(i);
                        break;
                    }
                }
            }
        }
        
        // Attach event listener to checkboxes
        var checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(function(checkbox) {
            checkbox.addEventListener('change', function() {
                handleCheckboxChange(checkbox);
            });
        });
    </script>
{% endblock content %}